{% comment %} 
date formatting syntax see http://strftime.net/ 
{% endcomment %}
{% assign from_year = site.posts[-1].date | date: '%Y' | times: 1 %}
{% assign to_year =  site.time | date: '%Y' | times: 1 %}

{% capture CalendarWorkspace %}
   
   {% capture my_cal_list %}{% endcapture %}

   {% for year in (from_year..to_year) %}
      {{ year }}
      
      
      {% capture end_of_this_year %}
         {{year}}-12-31
      {% endcapture %}
      {{year}}-12-31
      {% assign days_in_this_year = end_of_this_year | date: "%j" | plus: 0 %} 
      {{ days_in_this_year }}
      {% capture my_calendar %}{% endcapture %}
      {% capture active_days %}0{% endcapture %}
      {% capture empty_calendar %}{% endcapture %}
      
      {% comment %} initialize active days {% endcomment %}
      {% for day in (0..days_in_this_year) %}
         {% capture active_days %}
            {{ active_days }}, 0
         {% endcapture %}
      {% endfor %}
      
      {% assign active_list = {{ active_days | split: ", "}} %}
      
      {% comment %} fill in active days {% endcomment %}
      {% for post in site.posts %}
         {% assign posted_date = post.date %}
         {% assign posted_year =  posted_date | date: "%Y" | plus: 0  %}
         {% assign posted_day_since_newyear = posted_date | date: "%j" | plus: 0 %}
         {% if posted_year==year %}
            {% assign active_list[posted_day_since_newyear] = {{ post.url | prepend: site.baseurl | prepend: site.url }} %}
         {% endif %}
      {% endfor %}
      
      {% for i in active_list %}
         {% capture my_cal_list %}{{my_cal_list}} {{ i }}{% endcapture %}
      {% endfor %}
      
      {% comment %} 
         {% for post in site.posts %}
            {% assign date = post.date %}
            
            {% capture my_calendar %}
               {{ my_calendar }}
               {{ post.title}} was written on the 
               {{ date | date: "%j"  | plus: 0 }}th day since {{ date | date: "%Y" | plus: 0 }}, {{ date | date: "%U" | plus: 0 }} th week, on {{ date | date: "%m"  | plus: 0 }} {{ date | date: "%d"  | plus: 0 }}, weekday {{ date | date: "%u" | plus: 0 }}, 
            {% endcapture %}
            
              
            {% assign date = post.edit %}
            
            {% assign day_since_newyear = {{date | date: "%j" }} | plus: 0 %}
            {% assign day = {{date | date: "%e" }} | plus: 0 %}
            {% assign month = {{date | date: "%d" }} | plus: 0 %}
            {% assign year = {{date | date: "%Y" }} | plus: 0 %}
            {% assign week_sun = {{date | date" "%U" }} | plus 0 %}
            {% assign week_mon = {{date | date" "%W" }} | plus 0 %}
            {% assign weekday = {{date | date" "%W" }} | plus 0 %}
               
            {% capture my_calendar %} 
            edited on the {{ date | date: "%j"  | plus: 0 }}th day since {{ date | date: "%Y" | plus: 0 }}, {{ date | date: "%U" | plus: 0 }} th week, on {{ date | date: "%m"  | plus: 0 }} {{ date | date: "%d"  | plus: 0 }}, weekday {{ date | date: "%u" | plus: 0 }}, 
            {% endcapture %}
            
         {% endfor %}
      {% endcomment %} 
      
   {% endfor %} 
{% endcapture %}
{{ CalendarWorkspace }}
cal_list
{{my_cal_list | markdownify | strip}}
